<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
	<script>
		function loadVariables(){
			var chromeLanguage = window.navigator.userLanguage || window.navigator.language;
			document.getElementById("browserlanguage").innerHTML = chromeLanguage;
		}
	</script>

	<script type="text/javascript">
	(function (g, e, n, es, ys) {
	    g['_genesysJs'] = e;
	    g[e] = g[e] || function () {
	      (g[e].q = g[e].q || []).push(arguments)
	    };
	    g[e].t = 1 * new Date();
	    g[e].c = es;
	    ys = document.createElement('script'); ys.async = 1; ys.src = n; ys.charset = 'utf-8'; document.head.appendChild(ys);
	  })(window, 'Genesys', 'https://apps.mypurecloud.de/genesys-bootstrap/genesys.min.js', {
	    environment: 'euc1',
	    deploymentId: '82b31bd4-5e0d-49e5-a880-b0ad08647d7b'
	  });
		
	  Genesys("subscribe", "Launcher.ready" , function(o){
	    console.log("the launcher is ready!");
	  });
		
	</script>
	
	<script type="text/javascript" charset="utf-8">
		
		Genesys("subscribe", "Launcher.ready" , function(o){
		    console.log("The queue works!");
		  });
			
		  Genesys("subscribe", "Engage.inviteOffered" , function(o){
			console.log("Invite offered, sending events!");
		    //send custom website events here
		    sendEvents();
		  });
			
		  Genesys("subscribe", "Engage.inviteAccepted" , function(o){
		    console.log("Invite accepted, sending events!");
		    sendEvents();
		  });
			
		  Genesys('subscribe', 'Journey.qualifiedWebMessagingOffer', (data) => {
		    console.log('Journey.qualifiedWebMessagingOffer event!!!')
		    console.log('event data:', data)
		  });
			
		  Genesys("subscribe", "Journey.ready", function(){
		    console.log("Journey ready event!!!");
			 setTimeout(function(){ 

			    Genesys("command", "Journey.record", { eventName: "idle_for_10_s", customAttributes: { message: "Hesitate On Page"}}); 

			  }, 10000); 

			  console.log("idle_for_10_s"); 
			  
			  setTimeout(function(){ 
				  Genesys("command", "Journey.record", { eventName: "idle_for_20_s", customAttributes: { message: "Hesitate On Page" } }); 

			  }, 20000); 
			  console.log("idle_for_20_s"); 
			  
			  setTimeout(function(){ 
				  Genesys("command", "Journey.record", { eventName: "idle_for_25_s", customAttributes: { message: "Hesitate On Page" } }); 

			  }, 25000); 
			  console.log("idle_for_25_s"); 
			  
			  setTimeout(function(){ 
				  Genesys("command", "Journey.record", { eventName: "idle_for_30_s", customAttributes: { message: "Hesitate On Page" } }); 

			  }, 30000); 
			  console.log("idle_for_30_s"); 
			  
			  setTimeout(function(){ 
				  Genesys("command", "Journey.record", { eventName: "idle_for_35_s", customAttributes: { message: "Hesitate On Page" } }); 

			  }, 35000); 
			  console.log("idle_for_35_s"); 
			  
			  setTimeout(function(){ 
				  Genesys("command", "Journey.record", { eventName: "idle_for_40_s", customAttributes: { message: "Hesitate On Page" } }); 

			  }, 40000); 
			  console.log("idle_for_40_s"); 
			  
			  setTimeout(function(){ 
				  Genesys("command", "Journey.record", { eventName: "idle_for_45_s", customAttributes: { message: "Hesitate On Page" } }); 

			  }, 45000); 
			  console.log("idle_for_45_s"); 
			  
			  setTimeout(function(){ 
				  Genesys("command", "Journey.record", { eventName: "idle_for_50_s", customAttributes: { message: "Hesitate On Page" } }); 

			  }, 50000); 
			  console.log("idle_for_50_s"); 
		 });
	</script>
	
</head>
	
<body onLoad = "loadVariables()">
	
	<script type="text/javascript">
	  
	function toggleMessenger(){
	    Genesys("command", "Launcher.hide");
	    console.log("toggle messenger button clicked");
	    Genesys("command", "Messenger.open", {},
	      function(o){},  // if resolved
	      function(o){    // if rejected
		    Genesys("command", "Messenger.close");
	      });
	  }
		
	  function sendEvents(){
	    console.log("sendEvents invoked");
	
	    var brand = document.getElementById("brand").value;
	    var country = document.getElementById("country").value;
	    var language = document.getElementById("language").value;
	    var emailAddress = document.getElementById("emailAddress").value;
	    var baseURL = document.getElementById("baseURL").value;
		  
	    console.log("Values " + brand + " " + emailAddress + " " + country + " " + language + " " + baseURL);

	    Genesys("command", "Journey.record", {
	       eventName: "WebMessagingEvent",  customAttributes: { emailAddress: emailAddress, brand: brand, language: language, country: country, baseURL: baseURL }})
	  }
		
	  function toggleAndSend(){
	    console.log("toggleAndSend invoked")
	    toggleMessenger();
	    sendEvents();
	  }
		
	  function clearAndReload(){
	    localStorage.clear();
	    window.location.reload();
	  }
		
	</script>
	
<h1>This is a test</h1>
<h2>Retrieve preferred language from browser</h2>
<h2> The preferred language is: <span id="browserlanguage"></span></h2>

<button id="custom-launcher" onclick = "toggleMessenger()">
	Toggle Messenger
</button>
	
<br><br>
	
<input type="email" id="emailAddress" value="testemail@email.com"><br>
<input type="text" id="brand" value="Electrolux"><br>
<input type="text" id="language" value="EN"><br>
<input type="text" id="country" value="UK"><br>
<input type="text" id="baseURL" value="https://electrolux.co.uk"><br>

<br><br>
<button id="custom-launcher2" onclick="toggleAndSend()">
  Toggle and Send Events
</button>
	
<br><br>

</body>
</html>
