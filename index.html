<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
	<script>
		function loadVariables(){
			var chromeLanguage = window.navigator.userLanguage || window.navigator.language
			document.getElementById("browserlanguage").innerHTML = chromeLanguage
			let deploymentID;
		}
	</script>
	<script type="text/javascript" charset="utf-8">
	  let deploymentID;
	  (function (g, e, n, es, ys) {
	    g['_genesysJs'] = e;
	    g[e] = g[e] || function () {
	      (g[e].q = g[e].q || []).push(arguments)
	    };
	    g[e].t = 1 * new Date();
	    g[e].c = es;
	    ys = document.createElement('script'); ys.async = 1; ys.src = n; ys.charset = 'utf-8'; document.head.appendChild(ys);
	  })(window, 'Genesys', 'https://apps.mypurecloud.de/genesys-bootstrap/genesys.min.js', {
	    environment: 'euc1',
	    deploymentId: deploymentID
	  });
	</script>
	
	<script type="text/javascript" charset="utf-8">
	  Genesys("subscribe", "Launcher.ready" , function(o){
	    console.log("the launcher is ready!");
	  });
	</script>
</head>
<body onLoad = "loadVariables()">
	
	<script type="text/javascript">
	  
	function toggleMessenger(){
	    console.log("toggle messenger button clicked");
	    Genesys("command", "Messenger.open", {},
	      function(o){},  // if resolved
	      function(o){    // if rejected
		Genesys("command", "Messenger.close");
	      }
	    );
	  }
		
	  function sendEvents(){
	    console.log("sendEvents invoked");
	
	    var brand = document.getElementById("brand").value;
	    var country = document.getElementById("country").value;
	    var language = document.getElementById("language").value;
	    var emailAddress = document.getElementById("emailAddress").value;
	    var baseURL = document.getElementById("baseURL").value;

	    console.log("Values " + brand + " " + emailAddress + " " + country + " " + language + " " + baseURL);

	    Genesys("command", "Journey.record", {
	       eventName: "WebMessagingEvent",  customAttributes: { emailAddress: emailAddress, brand: brand, language: language, country: country, baseURL: baseURL }})
	  }
		
	  function toggleAndSend(){
	    console.log("toggleAndSend invoked")
	    toggleMessenger();
	    sendEvents();
	  }
		
	  function clearAndReload(){
	    localStorage.clear();
	    window.location.reload();
	  }
	
	   function changeDeploymentUK(){
	     var deploymentID = "1d4cc368-adaf-4e90-9be1-860714b0e41f";
	     return deploymentID;
	  }
	
	   function changeDeploymentIT(){
	     var deploymentID = "82b31bd4-5e0d-49e5-a880-b0ad08647d7b";
	     return deploymentID;
	   }
		
	</script>
	
<h1>This is a test</h1>
<h2>Retrieve preferred language from browser</h2>
<h2> The preferred language is: <span id="browserlanguage"></span></h2>

<button id="custom-launcher" onclick = "toggleMessenger()">
	Toggle Messenger
</button>
	
<br><br>
	
<input type="email" id="emailAddress" value="testemail@email.com"><br>
<input type="text" id="brand" value="Electrolux"><br>
<input type="text" id="language" value="EN"><br>
<input type="text" id="country" value="UK"><br>
<input type="text" id="baseURL" value="https://electrolux.co.uk"><br>

<br><br>
<button id="custom-launcher2" onclick="toggleAndSend()">
  Toggle and Send Events
</button>
<br><br>
<button id="clear-and-reload" onclick="clearAndReload()">
  Test button - Clear and reload page
</button>
	
<button id = "qa-product-en" onclick="changeDeploymentUK()">QA PRODUCT EN</button>
<button id = "qa-product-it" onclick="changeDeploymentIT()">QA PRODUCT IT</button>
<button id = "qa-product-es" onclick="changeDeployment()">QA PRODUCT ES</button>
<button id = "qa-product-pt" onclick="changeDeployment()">QA PRODUCT PT</button>

</body>
</html>
